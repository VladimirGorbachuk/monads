для работы по принципу TCR:

# в хуке pre-commit ожидается что виртуальное окружение находится в папке venv

python -m venv venv

source venv/bin/activate

# editable установка чтобы тесты работали с актуальным кодом пакета

python -m pip install --upgrade pip

pip install -e .


# установка линтеров
pip install .[lint]

# установка зависимостей для тестирования
pip install .[test]


чтобы при каждом сохранении проходили и проверки линтерами: нужен pre-commit (устанавливается с линтерами) и нужно установить его хуки pre-commit install


используйте @pytest.mark.xfail() чтобы свежедобавленный падающий тест не откатил изменение

продвигаемся по одному юниттесту, достигнув осмысленного завершённого фрагмента работы меняем коммит и двигаемся дальше
Принципы работы смотрим в видео Кента Бека (TCR)
